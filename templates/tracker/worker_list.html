{% extends "base.html" %}
{% load crispy_forms_tags %}

{% block title %}Workers{% endblock %}

{% block content %}
  <h1>
    Workers
    <a href="{% url 'tracker:worker-create' %}" class="btn btn-primary float-end">Create Worker</a>
  </h1>

  <form method="get" action="" class="my-4">
    <div class="input-group">
      {{ search_form|crispy }}
      <button class="btn btn-outline-secondary" type="submit">Search</button>
    </div>
  </form>

  {% if worker_list %}
    <table class="table">
      <thead>
      <tr>
        <th>Username</th>
        <th>Full Name</th>
        <th>Position</th>
        <th>Tasks Assigned</th>
      </tr>
      </thead>
      <tbody>
      {% for worker in worker_list %}
        <tr>
          <td><a href="{{ worker.get_absolute_url }}">{{ worker.username }}</a></td>
          <td>{{ worker.first_name }} {{ worker.last_name }}</td>
          <td>{{ worker.position.name }}</td>
          <td>{{ worker.task_count }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>

    {% if is_paginated %}
      {% include "includes/pagination.html" %}
    {% endif %}

  {% else %}
    <p>There are no workers matching your search.</p>
  {% endif %}
{% endblock %}